fs=10000;
Ts=1/fs;
t=[0:Ts:10];
m=cos(2*pi*t);
figure(1);
plot(t,m);
Ac = 2;
fc = 500;
x=(Ac+m).*cos(2*pi*fc*t);
figure(2);
plot(t,x);
env=abs(hilbert(x));
figure(3);
plot(t,env);
figure(4);
plot(t,env-Ac);
Ac = 0.7;
x=(Ac+m).*cos(2*pi*fc*t);
env=abs(hilbert(x));
figure(5);
plot(t,x);
figure(6);
plot(t,env);
figure(7);
plot(t,env-Ac);